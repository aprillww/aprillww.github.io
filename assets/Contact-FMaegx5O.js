import{r as l,j as e,S as f}from"./index-_z1QwpSS.js";import{E as o,e as w}from"./emailjs-config-DBM4tW46.js";const N=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),y=t=>/^(\+?86)?1[3-9]\d{9}$|^(\+?86)?0\d{2,3}-?\d{7,8}$|^\+?[\d\s\-\(\)]{7,}$/.test(t.replace(/\s/g,"")),d=t=>N(t)||y(t);function E(){const[t,c]=l.useState({name:"",company:"",contact:"",description:"",budget:"",timeline:""}),[m,x]=l.useState(!1),[h,u]=l.useState(!1),[n,p]=l.useState({}),b=(a,r)=>{const s={...n};switch(a){case"name":r.trim()?r.trim().length<2?s.name="姓名至少需要2个字符":delete s.name:s.name="姓名不能为空";break;case"contact":r.trim()?d(r.trim())?delete s.contact:s.contact="请输入有效的邮箱地址或电话号码":s.contact="邮箱或电话不能为空";break;case"description":r.trim()?r.trim().length<10?s.description="需求描述至少需要10个字符":delete s.description:s.description="需求描述不能为空";break}p(s)},i=(a,r)=>{c({...t,[a]:r}),b(a,r)},g=async a=>{a.preventDefault();const r={};if(t.name.trim()?t.name.trim().length<2&&(r.name="姓名至少需要2个字符"):r.name="姓名不能为空",t.contact.trim()?d(t.contact.trim())||(r.contact="请输入有效的邮箱地址或电话号码"):r.contact="邮箱或电话不能为空",t.description.trim()?t.description.trim().length<10&&(r.description="需求描述至少需要10个字符"):r.description="需求描述不能为空",p(r),!(Object.keys(r).length>0)){x(!0);try{const s={from_name:t.name,from_company:t.company,from_contact:t.contact,message:t.description,budget:t.budget||"未确定",timeline:t.timeline,to_email:o.TO_EMAIL};await w.send(o.SERVICE_ID,o.TEMPLATE_ID,s,o.PUBLIC_KEY),u(!0)}catch(s){console.error("发送邮件失败:",s),alert("发送失败，请稍后重试或直接联系：xiangyibaichuang@outlook.com")}finally{x(!1)}}},j=()=>t.name.trim()&&t.name.trim().length>=2&&t.contact.trim()&&d(t.contact.trim())&&t.description.trim()&&t.description.trim().length>=10;return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"预约与咨询 - LWW · 李雯雯",description:"提交预约信息，获取企业培训与定制咨询方案。"}),e.jsxs("section",{className:"mx-auto max-w-4xl px-4 pt-16 md:pt-20",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"预约与咨询"}),e.jsx("p",{className:"mt-2 text-white/80",children:"请填写以下信息，我们会尽快与您联系。"}),h?e.jsx("div",{role:"status",className:"mt-6 p-6 text-green-300 bg-green-900/20 rounded-2xl border border-green-500/30",children:"提交成功！我们已收到您的需求，将尽快联系您。"}):e.jsxs("form",{className:"mt-6 space-y-4 p-8 rounded-2xl bg-gradient-to-b from-[#5C3E9F] to-[#8A63D2] shadow-soft",onSubmit:g,noValidate:!0,children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-white",children:["姓名 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:t.name,onChange:a=>i("name",a.target.value),className:`mt-2 w-full rounded-xl border px-3 py-2 text-white placeholder-white/60 ${n.name?"border-red-500 bg-red-900/30":"border-purple-300/30 bg-[#7B57C2]"}`,placeholder:"请输入您的姓名"}),n.name&&e.jsx("p",{className:"mt-1 text-sm text-red-300",children:n.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-white",children:"公司（可选）"}),e.jsx("input",{id:"company",name:"company",type:"text",value:t.company,onChange:a=>i("company",a.target.value),className:"mt-2 w-full rounded-xl border border-purple-300/30 bg-[#7B57C2] px-3 py-2 text-white placeholder-white/60",placeholder:"请输入公司名称（可选）"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contact",className:"block text-sm font-medium text-white",children:["邮箱/电话 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{id:"contact",name:"contact",type:"text",required:!0,inputMode:"email",placeholder:"example@company.com 或 138****8888",value:t.contact,onChange:a=>i("contact",a.target.value),className:`mt-2 w-full rounded-xl border px-3 py-2 text-white placeholder-white/60 ${n.contact?"border-red-500 bg-red-900/30":"border-purple-300/30 bg-[#7B57C2]"}`}),n.contact&&e.jsx("p",{className:"mt-1 text-sm text-red-300",children:n.contact})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-white",children:["需求描述 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{id:"description",name:"description",required:!0,rows:5,value:t.description,onChange:a=>i("description",a.target.value),className:`mt-2 w-full rounded-xl border px-3 py-2 text-white placeholder-white/60 ${n.description?"border-red-500 bg-red-900/30":"border-purple-300/30 bg-[#7B57C2]"}`,placeholder:"请详细描述您的培训需求、目标人群、期望效果等（至少10个字符）"}),n.description&&e.jsx("p",{className:"mt-1 text-sm text-red-300",children:n.description})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"budget",className:"block text-sm font-medium text-white",children:"预算区间（可选）"}),e.jsxs("select",{id:"budget",name:"budget",value:t.budget,onChange:a=>i("budget",a.target.value),className:"mt-2 w-full rounded-xl border border-purple-300/30 bg-[#7B57C2] px-3 py-2 text-white",children:[e.jsx("option",{value:"",className:"bg-[#7B57C2] text-white",children:"未确定"}),e.jsx("option",{value:"lt50k",className:"bg-[#7B57C2] text-white",children:"≤ 5万"}),e.jsx("option",{value:"50-200k",className:"bg-[#7B57C2] text-white",children:"5万 - 20万"}),e.jsx("option",{value:"gt200k",className:"bg-[#7B57C2] text-white",children:"≥ 20万"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timeline",className:"block text-sm font-medium text-white",children:"期望时间（可选）"}),e.jsx("input",{id:"timeline",name:"timeline",type:"text",placeholder:"如：2025年Q1 或 7月中旬",value:t.timeline,onChange:a=>i("timeline",a.target.value),className:"mt-2 w-full rounded-xl border border-purple-300/30 bg-[#7B57C2] px-3 py-2 text-white placeholder-white/60"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",disabled:m||!j(),className:"px-6 py-3 bg-[#5C3E9F] hover:bg-[#4A2F7F] text-white font-medium rounded-xl transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:m?"提交中…":"提交"})})]})]})]})}export{E as default};
